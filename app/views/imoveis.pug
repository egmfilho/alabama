.page-header(style='background-image: url("../images/PN/paris_building_road_night_traffic_30814_1920x1080.jpg")')
	.dark-layer
		.container
			.row
				.col-xs-12
					h1.text-xlg Pesquisar Imóveis
			.row.hidden-xs.offset-top-30
				.col-sm-6
					p.text-sm
						a(href='/home') Home
						b &nbsp;/&nbsp;Imóveis

.container.search-filters.offset-bottom-30(ng-controller='SearchBarCtrl as searchBar')
	.row(ng-if='searchBar.isReady')
		.col-xs-12.col-sm-6.col-md-3
			input.form-control.input-lg(placeholder='Código' ng-model='searchBar.search.codigo')

		.col-md-3.hidden-xs.hidden-sm
			select.selectpicker.form-control(title='Tipo' data-container='body' autocomplete='off' ng-model='searchBar.search.tipo')
				option(value='' disabled style='display: none') Tipo
				option(value='0') Todos
				option(value='1') Venda
				option(value='2') Aluguel
		.col-md-3.hidden-xs.hidden-sm
			select.selectpicker.form-control(title='Cidade' data-container='body' ng-model='searchBar.search.cidade')
				option(value='' disabled style='display: none') Cidade
				option(value='0') Todas
				option(ng-repeat='cidade in searchBar.filters.city' ng-value='cidade.city_id') 
					| {{cidade.city_name}}

		span#expand-search.collapse.in
			.col-xs-12.col-sm-6.hidden-md.hidden-lg
				select.selectpicker.form-control(title='Tipo' data-container='body' autocomplete='off' ng-model='searchBar.search.tipo')
					option(value='' disabled style='display: none') Tipo
					option(value='0') Todos
					option(value='1') Venda
					option(value='2') Aluguel
			.col-xs-12.col-sm-6.hidden-md.hidden-lg
				select.selectpicker.form-control(title='Cidade' data-container='body' ng-model='searchBar.search.cidade')
					option(value='' disabled style='display: none') Cidade
					option(value='0') Todas
					option(ng-repeat='cidade in searchBar.filters.city' ng-value='cidade.city_id') 
						| {{cidade.city_name}}
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Bairro' data-container='body' ng-model='searchBar.search.bairro')
					option(value='' disabled style='display: none') Bairro
					option(value='0') Todos
					option(ng-repeat='bairro in searchBar.filters.districts' ng-value='bairro.district_id')
						| {{bairro.district_name}} ({{bairro.immobiles}})
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Categoria' data-container='body' ng-model='searchBar.search.categoria')
					option(value='' disabled style='display: none') Categoria
					option(value='0') Tudo
					option(ng-repeat='categoria in searchBar.filters.category' ng-value='categoria.immobile_category_id')
						| {{categoria.immobile_category_name}}
			.col-xs-12.col-sm-6.col-md-3
				rzslider(rz-slider-model='searchBar.search.minValue' rz-slider-high='searchBar.search.maxValue' rz-slider-options='searchBar.sliderPrice.options')
			.col-xs-12.col-sm-6.col-md-3
				rzslider(rz-slider-model='searchBar.search.minArea' rz-slider-high='searchBar.search.maxArea' rz-slider-options='searchBar.sliderArea.options')
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Dormitórios' data-container='body' ng-model='searchBar.search.dormitorios')
					option(value='' disabled style='display: none') Dormitórios
					option(value='0') Tudo
					option(value='1') 1 dormitório
					option(value='2') 2 dormitórios
					option(value='3') 3 dormitórios
					option(value='4') 4+ dormitórios
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Banheiros' data-container='body' ng-model='searchBar.search.banheiros')
					option(value='' disabled style='display: none') Banheiros
					option(value='0') Tudo
					option(value='1') 1 banheiro
					option(value='2') 2 banheiros
					option(value='3') 3 banheiros
					option(value='4') 4+ banheiros
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Suítes' data-container='body' ng-model='searchBar.search.suite')
					option(value='' disabled style='display: none') Suíte
					option(value='0') Todos
					option(value='1') Sem suíte
					option(value='2') Com suíte
			.col-xs-12.col-sm-6.col-md-3
				select.selectpicker.form-control(title='Garagem' data-container='body' ng-model='searchBar.search.garagem')
					option(value='' disabled style='display: none') Garagem
					option(value='0') Todos
					option(value='1') Sem garagem
					option(value='2') Com garagem
		.col-xs-12.col-sm-6.col-md-3
			button.btn.btn-primary.btn-block.btn-lg(ng-click='searchBar.pesquisar()')
				i.glyphicon.glyphicon-search
				|  Pesquisar
		.col-xs-12.remove-padding.visible-xs-block
			//- Texto colocado via CSS
			a.center-block.text-center(href='' data-toggle='collapse' data-target='#expand-search')

.background-gray
	.container
		.row
			.hidden-xs.col-sm-4.col-md-3.filters(style='position: relative')
				.container-doido(watch-height)
					.panel.panel-primary.simple-shadow(name='Ordenação')
						.panel-heading
							a(href='' data-toggle='collapse' data-target='.panel[name="Ordenação"] .collapse')
								| Ordenação
						.collapse.in
							.panel-body
								div(ng-init='menorArea={column: 6, order: 1}')
									a(href='' style='display: block' ng-click='imoveis.setFiltro("order", menorArea)' ng-class='{"text-bold text-uppercase": imoveis.getFiltros().order.column == menorArea.column && imoveis.getFiltros().order.order == menorArea.order}')
										i.fa.fa-sort-amount-asc
										|  Menor área
								div(ng-init='maiorArea={column: 6, order: 0}')
									a(href='' style='display: block' ng-click='imoveis.setFiltro("order", maiorArea)' ng-class='{"text-bold text-uppercase": imoveis.getFiltros().order.column == maiorArea.column  && imoveis.getFiltros().order.order == maiorArea.order}')
										i.fa.fa-sort-amount-desc
										|  Maior área
								div(ng-init='menorValor={column: 3, order: 1}')
									a(href='' style='display: block' ng-click='imoveis.setFiltro("order", menorValor)' ng-class='{"text-bold text-uppercase": imoveis.getFiltros().order.column == menorValor.column && imoveis.getFiltros().order.order == menorValor.order}')
										i.fa.fa-sort-numeric-asc
										|  Menor valor
								div(ng-init='maiorValor={column: 3, order: 0}')
									a(href='' style='display: block' ng-click='imoveis.setFiltro("order", maiorValor)' ng-class='{"text-bold text-uppercase": imoveis.getFiltros().order.column == maiorValor.column && imoveis.getFiltros().order.order == maiorValor.order}')
										i.fa.fa-sort-numeric-desc
										|  Maior valor
								div(ng-init='maisRecentes={column: 0, order: 0}')
									a(href='' style='display: block' ng-click='imoveis.setFiltro("order", maisRecentes)' ng-class='{"text-bold text-uppercase": imoveis.getFiltros().order.column == maisRecentes.column && imoveis.getFiltros().order.order == maisRecentes.order}')
										i.fa.fa-clock-o
										|  Mais recentes

					.panel.panel-primary.simple-shadow(name='Dormitórios')
						.panel-heading
							a(href='' data-toggle='collapse' data-target='.panel[name="Dormitórios"] .collapse')
								| Dormitórios
						.collapse.in
							.panel-body
								div(style='display: block' ng-repeat='d in imoveis.resumo.bedroom track by $index')
									a(href='' ng-click='imoveis.setFiltro("bedroom", d.filter)' ng-class='{"text-bold text-uppercase": d.filter == imoveis.getFiltros().dormitorios}')
										| {{d.filter == 0 ? 'Sem' : d.filter}}{{d.filter == 4 ? '+' : ''}} {{d.filter == 1 ? 'dormitório' : 'dormitórios'}} ({{d.count}})
										span(ng-if='d.filter == imoveis.getFiltros().dormitorios')
											| &nbsp;
											i.fa.fa-remove

					.panel.panel-primary.simple-shadow(name='Banheiros')
						.panel-heading
							a(href='' data-toggle='collapse' data-target='.panel[name="Banheiros"] .collapse')
								| Banheiros
						.collapse.in
							.panel-body
								div(style='display: block' ng-repeat='b in imoveis.resumo.bathroom track by $index')
									a(href='' ng-click='imoveis.setFiltro("bathroom", b.filter)' ng-class='{"text-bold text-uppercase": b.filter == imoveis.getFiltros().banheiros}')
										| {{b.filter == 0 ? 'Sem' : b.filter}}{{b.filter == 4 ? '+' : ''}} {{b.filter == 1 ? 'banheiro' : 'banheiros'}} ({{b.count}})
										span(ng-if='b.filter == imoveis.getFiltros().banheiros')
											| &nbsp;
											i.fa.fa-remove

					.panel.panel-primary.simple-shadow(name='Suíte')
						.panel-heading
							a(href='' data-toggle='collapse' data-target='.panel[name="Suíte"] .collapse')
								| Suíte
						.collapse.in
							.panel-body
								div(style='display: block' ng-repeat='s in imoveis.resumo.suite track by $index')
									a(href='' ng-click='imoveis.setFiltro("suite", s.filter)' ng-class='{"text-bold text-uppercase": s.filter == imoveis.getFiltros().suite}')
										| {{s.filter == 1 ? 'Sem suíte' : 'Com suíte'}} ({{s.count}})
										span(ng-if='s.filter == imoveis.getFiltros().suite')
											| &nbsp;
											i.fa.fa-remove

					.panel.panel-primary.simple-shadow(name='Garagem')
						.panel-heading
							a(href='' data-toggle='collapse' data-target='.panel[name="Garagem"] .collapse')
								| Garagem
						.collapse.in
							.panel-body
								div(style='display: block' ng-repeat='g in imoveis.resumo.parking_spot track by $index')
									a(href='' ng-click='imoveis.setFiltro("parking_spot", g.filter)' ng-class='{"text-bold text-uppercase": g.filter == imoveis.getFiltros().garagem}')
										| {{g.filter == 1 ? 'Sem garagem' : 'Com garagem'}} ({{g.count}})
										span(ng-if='g.filter == imoveis.getFiltros().garagem')
											| &nbsp;
											i.fa.fa-remove
				
			.col-xs-12.col-sm-8.col-md-9
				card-list(cards='imoveis.cardList' name='{{imoveis.pagination.getLabelResultado()}}' is-grid='false' ng-if='imoveis.cardList.length')
				.col-xs-12
					nav.pull-right.offset-top-30(ng-show='imoveis.pagination.totalItems > imoveis.pagination.itemsPerPage')
						ul.pagination
							li(ng-class='{"disabled": imoveis.pagination.index == 0}')
								a(href='' ng-click='imoveis.pagination.goTo(imoveis.pagination.index - 1)') 
									span &laquo;
							li(ng-repeat='n in getNumber(imoveis.pagination.getPageAmount()) track by $index' ng-class='{"active": $index == imoveis.pagination.index, "display-none": imoveis.pagination.hidePage($index)}')
								a(href='' ng-click='imoveis.pagination.goTo($index)')
									span {{$index + 1}}
							li(ng-class='{"disabled": imoveis.pagination.index >= imoveis.pagination.getPageAmount() - 1}')
								a(href='' ng-click='imoveis.pagination.goTo(imoveis.pagination.index + 1)')
									span &raquo;